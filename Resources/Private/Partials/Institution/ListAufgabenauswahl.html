<html xmlns:mb="http://typo3.org/ns/MbFosbos/Bfbn/ViewHelpers"
  data-namespace-typo3-fluid="true">

    <f:flashMessages />
  <div class="mt-3 mb-3">
    <table class="table table-striped table-bordered mb-3">
    <thead class="bg-primary text-white">
        <tr class="align-middle">
            <td class="text-center">Schule</td>
            <td class="text-center">FOS 12</td>
            <td class="text-center">FOS 13</td>
            <td class="text-center">BOS 12</td>
            <td class="text-center">BOS 13</td>
        </tr>
    </thead>      
      <f:for each="{institutionen}" as="institution">
        
        <f:variable name="schulehatfos12">0</f:variable>
        <f:variable name="schulehatfos13">0</f:variable>
        <f:variable name="schulehatbos12">0</f:variable>
        <f:variable name="schulehatbos13">0</f:variable>
 
        <f:if condition="{institution.art.uid} == 2">
          <f:for each="{institution.ausbildungsrichtungen}" as="ausbildungsrichtung"> 
            <f:if condition="{ausbildungsrichtung.uid} == 2 || {ausbildungsrichtung.uid} == 7 || {ausbildungsrichtung.uid} == 10 || {ausbildungsrichtung.uid} == 15 || {ausbildungsrichtung.uid} == 20 || {ausbildungsrichtung.uid} == 25 || {ausbildungsrichtung.uid} == 30">
              <f:variable name="schulehatfos12">1</f:variable>
            </f:if>
            <f:if condition="{ausbildungsrichtung.uid} == 3 || {ausbildungsrichtung.uid} == 8 || {ausbildungsrichtung.uid} == 11 || {ausbildungsrichtung.uid} == 16 || {ausbildungsrichtung.uid} == 21 || {institution.ausbildungsrichtung.uid} == 26 || {ausbildungsrichtung.uid} == 31">
              <f:variable name="schulehatfos13">1</f:variable> 
            </f:if>
            <f:if condition="{ausbildungsrichtung.uid} == 4 || {ausbildungsrichtung.uid} == 12 || {ausbildungsrichtung.uid} == 17 || {ausbildungsrichtung.uid} == 22 || {ausbildungsrichtung.uid} == 27 || {ausbildungsrichtung.uid} == 32">
              <f:variable name="schulehatbos12">1</f:variable>
            </f:if>
            <f:if condition="{ausbildungsrichtung.uid} == 5 || {ausbildungsrichtung.uid} == 13 || {ausbildungsrichtung.uid} == 18 || {ausbildungsrichtung.uid} == 23 || {.ausbildungsrichtung.uid} == 28 || {ausbildungsrichtung.uid} == 33">
              <f:variable name="schulehatbos13">1</f:variable>              
            </f:if>      
          </f:for>    
        </f:if>
        <f:if condition="{institution.art.uid} == 3">
          <f:for each="{institution.ausbildungsrichtungen}" as="ausbildungsrichtung"> 
      <f:if condition="{ausbildungsrichtung.uid} == 2 || {ausbildungsrichtung.uid} == 7 || {ausbildungsrichtung.uid} == 10 || {ausbildungsrichtung.uid} == 15 || {ausbildungsrichtung.uid} == 20 || {ausbildungsrichtung.uid} == 25 || {ausbildungsrichtung.uid} == 30">
              <f:variable name="schulehatfos12">1</f:variable>
            </f:if>
            <f:if condition="{ausbildungsrichtung.uid} == 3 || {ausbildungsrichtung.uid} == 8 || {ausbildungsrichtung.uid} == 11 || {ausbildungsrichtung.uid} == 16 || {ausbildungsrichtung.uid} == 21 || {ausbildungsrichtung.uid} == 26 || {ausbildungsrichtung.uid} == 31">
              <f:variable name="schulehatfos13">1</f:variable> 
            </f:if>      
          </f:for>    
        </f:if>
        <f:if condition="{institution.art.uid} == 4">
          <f:for each="{institution.ausbildungsrichtungen}" as="ausbildungsrichtung"> 
            <f:if condition="{ausbildungsrichtung.uid} == 4 || {ausbildungsrichtung.uid} == 12 || {ausbildungsrichtung.uid} == 17 || {ausbildungsrichtung.uid} == 22 || {ausbildungsrichtung.uid} == 27 || {ausbildungsrichtung.uid} == 32">
              <f:variable name="schulehatbos12">1</f:variable>
            </f:if>
            <f:if condition="{ausbildungsrichtung.uid} == 5 || {ausbildungsrichtung.uid} == 13 || {ausbildungsrichtung.uid} == 18 || {ausbildungsrichtung.uid} == 23 || {ausbildungsrichtung.uid} == 28 || {ausbildungsrichtung.uid} == 33">
              <f:variable name="schulehatbos13">1</f:variable>              
            </f:if>      
          </f:for>    
        </f:if>        
        <tr>
          <td>{institution.kurzbezeichnung}</td>
          <f:if condition="{schulehatfos12} == 1">            
              <f:then>
                <f:if condition="<mb:AufgabenauswahlDa institution='{institution.uid}' schulart='1' jahrgangsstufe='2'  /> == 1">
                  <f:then>
                    <td class="text-center"><i class="fas fa-check fa-fw fa-lg mr-1"></i></td>
                  </f:then>
                  <f:else>
                    <td class="text-center"><i class="fas fa-xmark fa-fw fa-lg mr-1"></i></td>    
                  </f:else>
                </f:if>  
              </f:then>
              <f:else>
                  <td class="text-center"></td>
              </f:else>
          </f:if>       
          <f:if condition="{schulehatfos13} == 1">            
              <f:then>
                <f:if condition="<mb:AufgabenauswahlDa institution='{institution.uid}' schulart='1' jahrgangsstufe='3'  /> == 1">
                  <f:then>
                    <td class="text-center"><i class="fas fa-check fa-fw fa-lg mr-1"></i></td>
                  </f:then>
                  <f:else>
                    <td class="text-center"><i class="fas fa-xmark fa-fw fa-lg mr-1"></i></td>    
                  </f:else>
                </f:if>  
              </f:then>
              <f:else>
                  <td class="text-center"></td>
              </f:else>
          </f:if>
          <f:if condition="{schulehatbos12} == 1">            
              <f:then>
                <f:if condition="<mb:AufgabenauswahlDa institution='{institution.uid}' schulart='2' jahrgangsstufe='2'  /> == 1">
                  <f:then>
                    <td class="text-center"><i class="fas fa-check fa-fw fa-lg mr-1"></i></td>
                  </f:then>
                  <f:else>
                    <td class="text-center"><i class="fas fa-xmark fa-fw fa-lg mr-1"></i></td>    
                  </f:else>
                </f:if>  
              </f:then>
              <f:else>
                  <td class="text-center"></td>
              </f:else>
          </f:if>       
          <f:if condition="{schulehatbos13} == 1">            
              <f:then>
                <f:if condition="<mb:AufgabenauswahlDa institution='{institution.uid}' schulart='2' jahrgangsstufe='3'  /> == 1">
                  <f:then>
                    <td class="text-center"><i class="fas fa-check fa-fw fa-lg mr-1"></i></td>
                  </f:then>
                  <f:else>
                    <td class="text-center"><i class="fas fa-xmark fa-fw fa-lg mr-1"></i></td>    
                  </f:else>
                </f:if>  
              </f:then>
              <f:else>
                  <td class="text-center"></td>
              </f:else>
          </f:if>
        </tr>
      </f:for>
    </table>
  </div>     


</html>
