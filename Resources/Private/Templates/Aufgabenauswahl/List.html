<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" data-namespace-typo3-fluid="true">
<f:layout name="Default" />

<f:section name="content">

<f:variable name="schulehatfos12">0</f:variable>
<f:variable name="schulehatfos13">0</f:variable>
<f:variable name="schulehatbos12">0</f:variable>
<f:variable name="schulehatbos13">0</f:variable>

<f:variable name="fos12da">0</f:variable>
<f:variable name="fos13da">0</f:variable>
<f:variable name="bos12da">0</f:variable>
<f:variable name="bos13da">0</f:variable>
  
  <f:if condition="{institution.art.uid} == 2">
    <f:for each="{institution.ausbildungsrichtungen}" as="ausbildungsrichtung"> 
      <f:if condition="{ausbildungsrichtung.uid} == 2 || {ausbildungsrichtung.uid} == 7 || {ausbildungsrichtung.uid} == 10 || {ausbildungsrichtung.uid} == 15 || {ausbildungsrichtung.uid} == 20 || {ausbildungsrichtung.uid} == 25 || {ausbildungsrichtung.uid} == 30">
        <f:variable name="schulehatfos12">1</f:variable>
      </f:if>
      <f:if condition="{ausbildungsrichtung.uid} == 3 || {ausbildungsrichtung.uid} == 8 || {ausbildungsrichtung.uid} == 11 || {ausbildungsrichtung.uid} == 16 || {ausbildungsrichtung.uid} == 21 || {institution.ausbildungsrichtung.uid} == 26 || {ausbildungsrichtung.uid} == 31">
        <f:variable name="schulehatfos13">1</f:variable> 
      </f:if>
      <f:if condition="{ausbildungsrichtung.uid} == 4 || {ausbildungsrichtung.uid} == 12 || {ausbildungsrichtung.uid} == 17 || {ausbildungsrichtung.uid} == 22 || {ausbildungsrichtung.uid} == 27 || {ausbildungsrichtung.uid} == 32">
        <f:variable name="schulehatbos12">1</f:variable>
      </f:if>
      <f:if condition="{ausbildungsrichtung.uid} == 5 || {ausbildungsrichtung.uid} == 13 || {ausbildungsrichtung.uid} == 18 || {ausbildungsrichtung.uid} == 23 || {.ausbildungsrichtung.uid} == 28 || {ausbildungsrichtung.uid} == 33">
        <f:variable name="schulehatbos13">1</f:variable>              
      </f:if>      
    </f:for>    
  </f:if>
  <f:if condition="{institution.art.uid} == 3">
    <f:for each="{institution.ausbildungsrichtungen}" as="ausbildungsrichtung"> 
      <f:if condition="{ausbildungsrichtung.uid} == 2 || {ausbildungsrichtung.uid} == 7 || {ausbildungsrichtung.uid} == 10 || {ausbildungsrichtung.uid} == 15 || {ausbildungsrichtung.uid} == 20 || {ausbildungsrichtung.uid} == 25 || {ausbildungsrichtung.uid} == 30">
        <f:variable name="schulehatfos12">1</f:variable>
      </f:if>
      <f:if condition="{ausbildungsrichtung.uid} == 3 || {ausbildungsrichtung.uid} == 8 || {ausbildungsrichtung.uid} == 11 || {ausbildungsrichtung.uid} == 16 || {ausbildungsrichtung.uid} == 21 || {ausbildungsrichtung.uid} == 26 || {ausbildungsrichtung.uid} == 31">
        <f:variable name="schulehatfos13">1</f:variable> 
      </f:if>      
    </f:for>    
  </f:if>
  <f:if condition="{institution.art.uid} == 4">
    <f:for each="{institution.ausbildungsrichtungen}" as="ausbildungsrichtung"> 
      <f:if condition="{ausbildungsrichtung.uid} == 4 || {ausbildungsrichtung.uid} == 12 || {ausbildungsrichtung.uid} == 17 || {ausbildungsrichtung.uid} == 22 || {ausbildungsrichtung.uid} == 27 || {ausbildungsrichtung.uid} == 32">
        <f:variable name="schulehatbos12">1</f:variable>
      </f:if>
      <f:if condition="{ausbildungsrichtung.uid} == 5 || {ausbildungsrichtung.uid} == 13 || {ausbildungsrichtung.uid} == 18 || {ausbildungsrichtung.uid} == 23 || {ausbildungsrichtung.uid} == 28 || {ausbildungsrichtung.uid} == 33">
        <f:variable name="schulehatbos13">1</f:variable>              
      </f:if>      
    </f:for>    
  </f:if>  
	<h1>Aufgabenauswahl</h1>		

    <f:flashMessages />
    <div class="mt-3 mb-2">
      <p><b>Termin: <f:format.date format="%A, %d. %B %Y">{settings.termin}</f:format.date></b></p>   
    </div>  
	<div class="mt-5 mb-5">
	<f:if condition="{aufgabenauswahlen}"><i class="fa-solid fa-circle-question"></i>
		<f:then>
          <div class="table-responsive-sm">         
			<table class="table table-striped table-bordered">
				<thead>
					<tr>						
						<th scope="col">Schulart</th>
						<th scope="col">Jahrgangsstufe</th>						
						<th scope="col"></th>
						<th scope="col"></th>
					</tr>
				</thead>
				<tbody>              
                  <f:for each="{aufgabenauswahlen}" as="aufgabenauswahl">
                    <f:if condition="{aufgabenauswahl.schulart.uid} == 1">
                      <f:then>
                        <f:if condition="{aufgabenauswahl.jahrgangsstufe.uid} == 2">
                          <f:then>
                          	<f:variable name="fos12da">1</f:variable>  
                          </f:then>
                          <f:else>
                          	<f:if condition="{aufgabenauswahl.jahrgangsstufe.uid} == 3">
                              <f:then>
                              	<f:variable name="fos13da">1</f:variable>  
                              </f:then>
                            </f:if>  
                          </f:else>
                        </f:if>
                      </f:then>
                      <f:else>
						<f:if condition="{aufgabenauswahl.schulart.uid} == 2">
                          <f:then>
                            <f:if condition="{aufgabenauswahl.jahrgangsstufe.uid} == 2">
                              <f:then>
                                <f:variable name="bos12da">1</f:variable>  
                              </f:then>
                              <f:else>
                                <f:if condition="{aufgabenauswahl.jahrgangsstufe.uid} == 3">
                                  <f:then>
                                    <f:variable name="bos13da">1</f:variable>  
                                  </f:then>
                                </f:if>  
                              </f:else>
                            </f:if>
                          </f:then>
                        </f:if>
                      </f:else>                      
                    </f:if>
                      <tr>
                          <td>{aufgabenauswahl.schulart.bezeichnung}</td>
                          <td>{aufgabenauswahl.jahrgangsstufe.bezeichnung}</td>
                          <td style="text-align:center"><f:link.action action="edit" class="btn btn-primary" arguments="{aufgabenauswahl : aufgabenauswahl}"><i class="fas fa-pen me-2"></i>Ändern</f:link.action></td>
                          <td style="text-align:center"><f:link.action action="delete" class="btn btn-primary" arguments="{aufgabenauswahl : aufgabenauswahl}"><i class="fas fa-trash-alt me-2"></i>Löschen</f:link.action></td>
                      </tr>
                  </f:for>
              	</tbody>
			</table>
          </div>
		</f:then>
		<f:else>
			<p>Bisher wurden keine Vorgaben gemacht.</p>
		</f:else>
	</f:if>
	</div>
  	<div class="mt-3 mb-3">
      <f:if condition="{schulehatfos12}==1 && {fos12da}==0">
        	<f:link.action class="btn btn-primary mt-5" action="new" arguments="{schulartuid: 1, jahrgangsstufeuid: 2}" title="Die Aufgabenauswahl für die 12. Jahrgangsstufe der FOS vorgeben">Aufgabenauswahl FOS12 vorgeben</f:link.action>
      </f:if>
      <f:if condition="{schulehatfos13}==1 && {fos13da}==0">
        	<f:link.action class="btn btn-primary mt-5" action="new" arguments="{schulartuid: 1, jahrgangsstufeuid: 3}" title="Die Aufgabenauswahl für die 13. Jahrgangsstufe der FOS vorgeben">Aufgabenauswahl FOS13 vorgeben</f:link.action>
      </f:if>
      <f:if condition="{schulehatbos12}==1 && {bos12da}==0">
        	<f:link.action class="btn btn-primary mt-5" action="new" arguments="{schulartuid: 2, jahrgangsstufeuid: 2}" title="Die Aufgabenauswahl für die 12. Jahrgangsstufe der BOS vorgeben">Aufgabenauswahl BOS12 vorgeben</f:link.action>
      </f:if>
      <f:if condition="{schulehatbos13}==1 && {bos13da}==0">
        	<f:link.action class="btn btn-primary mt-5" action="new" arguments="{schulartuid: 2, jahrgangsstufeuid: 3}" title="Die Aufgabenauswahl für die 13. Jahrgangsstufe der BOS vorgeben">Aufgabenauswahl BOS13 vorgeben</f:link.action>
      </f:if>      
  	</div>
</f:section>
</html>
